!function(t){"use strict";function i(t,i){if(null==i)return null;null==i.__id__&&(i.__id__=I++);var e;return null==t.hx__closures__?t.hx__closures__={}:e=t.hx__closures__[i.__id__],null==e&&(e=function(){return e.method.apply(e.scope,arguments)},e.scope=t,e.method=i,t.hx__closures__[i.__id__]=e),e}var e=function(){return E.__string_rec(this,"")},n=function(t,i){i=i.split("u").join(""),this.r=new RegExp(t,i)};n.__name__=!0,n.prototype={match:function(t){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(t),this.r.s=t,null!=this.r.m}};var s=function(t,i){this.min=t,this.max=i};s.__name__=!0,s.prototype={hasNext:function(){return this.min<this.max},next:function(){return this.min++}};var h=function(){};h.__name__=!0,h.map=function(t,i){for(var e=new r,n=t.iterator();n.hasNext();){var s=n.next();e.add(i(s))}return e},h.mapi=function(t,i){for(var e=new r,n=0,s=t.iterator();s.hasNext();){var h=s.next();e.add(i(n++,h))}return e};var r=function(){this.length=0};r.__name__=!0,r.prototype={add:function(t){var i=[t];null==this.h?this.h=i:this.q[1]=i,this.q=i,this.length++},push:function(t){var i=[t,this.h];this.h=i,null==this.q&&(this.q=i),this.length++},iterator:function(){return new o(this.h)}};var o=function(t){this.head=t,this.val=null};o.__name__=!0,o.prototype={hasNext:function(){return null!=this.head},next:function(){return this.val=this.head[0],this.head=this.head[1],this.val}};var a=function(){this.dragging=!1,this.circles=new r,this.lineThick=3,this.lineCol="#f0f0bf",this.count=0,this.poly=[93,195,129,92,280,81,402,134,477,70,619,61,759,97,758,247,662,347,665,230,721,140,607,117,472,171,580,178,603,257,605,377,690,404,787,328,786,480,617,510,611,439,544,400,529,291,509,218,400,358,489,402,425,479,268,464,341,338,393,427,373,284,429,197,301,150,296,245,252,384,118,360,190,272,244,165,81,259,40,216];var t=new v;this.surface=t.surface;var e=window.document.body;e.appendChild(t.dom),this.holder=new d,this.holder.set_x(100),this.holder.set_y(50),this.holder.set_width(800),this.holder.set_height(600),p.addChild(this,this.holder),this.lineHolder=new d,this.lineHolder.set_x(0),this.lineHolder.set_y(0),this.holder.addChild(this.lineHolder),this.createVertices(this.poly),this.drawTriangulationLines(this.poly),this.enterFrame=new c(i(this,this.triangulateMaybe))};a.__name__=!0,a.main=function(){new a},a.prototype={triangulateMaybe:function(){this.count++,this.dragging&&this.count%3==0&&this.renderTriangulation()},createVertices:function(t){for(var e,n=b._new(t),s=[13816001,13467688,13802769,14905640,15755121,13777201,11480113,9450302,8797520,5786205,5545667,2912413,4553390,3558765,3640429,7251784,3562916,4550210,12683310,8467492,4206116,2696224,5396305,1776409],h=s.length,r=0,o=9,a=10,l=0;l<(n.length/2|0);){var _,u=2*l|0;_={x:n[u],y:n[u+1]},++l,e=this.createCircle(_.x-o|0,_.y-a|0,s[r%h]),e.setupDrag(),e.dragInform=!0,e.dragging.add(i(this,this.update)),e.release.add(i(this,this.finish)),r++,this.circles.push(e)}},update:function(){this.dragging=!0},finish:function(){this.dragging=!1,this.renderTriangulation()},renderTriangulation:function(){this.poly=[];for(var t=9,i=10,e=this.circles.h,n=null;null!=e;){var s;s=function(t){var i;return n=e[0],e=e[1],i=n}(this),this.poly.push(s.get_y()+i),this.poly.push(s.get_x()+t)}this.poly.reverse(),this.drawTriangulationLines(this.poly)},drawTriangulationLines:function(t){this.clear();for(var i,e,n,s,h=T.triangulate(t),o=x._new(h),a=new r,l=0;l<(o.length/3|0);){var _,u=3*l|0;_={a:o[u],b:o[u+1],c:o[u+2]},++l,s=2*_.a|0,i={x:this.poly[s],y:this.poly[s+1]},s=2*_.b|0,e={x:this.poly[s],y:this.poly[s+1]},s=2*_.c|0,n={x:this.poly[s],y:this.poly[s+1]},a.add(f.lineFromTo(this.lineHolder,i.x,i.y,e.x,e.y,this.lineThick,this.lineThick,this.lineCol)),a.add(f.lineFromTo(this.lineHolder,e.x,e.y,n.x,n.y,this.lineThick,this.lineThick,this.lineCol)),a.add(f.lineFromTo(this.lineHolder,n.x,n.y,i.x,i.y,this.lineThick,this.lineThick,this.lineCol))}this.lines=a},createCircle:function(t,i,e){var n=new d;n.set_x(t),n.set_y(i);f.drawGradElipse(n,0,0,18,20,e,e);return this.holder.addChild(n),n},clear:function(){if(null!=this.lines)for(var t=this.lines.h,i=null;null!=t;){var e;e=function(e){var n;return i=t[0],t=t[1],n=i}(this);for(var n=e.h,s=null;null!=n;){var h;h=function(t){var i;return s=n[0],n=n[1],i=s}(this),this.lineHolder.getInstance().removeChild(h)}e=null}}},Math.__name__=!0;var l=function(){};l.__name__=!0,l.isFunction=function(t){return"function"==typeof t&&!(t.__name__||t.__ename__)},l.compareMethods=function(t,i){return t==i?!0:l.isFunction(t)&&l.isFunction(i)?t.scope==i.scope&&t.method==i.method&&null!=t.method:!1};var _=function(){};_.__name__=!0,_.string=function(t){return E.__string_rec(t,"")},_["int"]=function(t){return 0|t};var u=function(){};u.__name__=!0,u.lpad=function(t,i,e){if(i.length<=0)return t;for(;t.length<e;)t=i+t;return t},u.hex=function(t,i){var e="",n="0123456789ABCDEF";do e=n.charAt(15&t)+e,t>>>=4;while(t>0);if(null!=i)for(;e.length<i;)e="0"+e;return e};var c=function(t){this.onEnterFrame=t;var i,e=window.document;i=e.createElement("style"),i.innerHTML="@keyframes spin {  from { transform:rotate( 0deg ); } to { transform:rotate( 360deg ); } }",window.document.getElementsByTagName("head")[0].appendChild(i),i.animation="spin 1s linear infinite",this.loop(60)};c.__name__=!0,c.prototype={loop:function(t){return window.requestAnimationFrame(i(this,this.loop)),this.onEnterFrame(),!0}};var d=function(t){if(this.isVideo(t))this._vid=function(t){var i,e=p.ROOT(t);return i=e.createElement("video")}(this),this._dom=this._vid;else if("canvas"==t){var e=p.ROOT(this);this._dom=e.createElement("canvas")}else{var n=p.ROOT(this);this._dom=n.createElement("div")}this._style=this._dom.style,this.isIE=y.get_browserType()==w.IE,this.out=new C,this.out.tellEnabled=i(this,this.outEnabled),this.out.tellDisabled=i(this,this.outDisabled),this.over=new C,this.over.tellEnabled=i(this,this.overEnabled),this.over.tellDisabled=i(this,this.overDisabled),this.release=new C,this.release.tellEnabled=i(this,this.releaseEnabled),this.release.tellDisabled=i(this,this.releaseDisabled),this.press=new C,this.press.tellEnabled=i(this,this.pressEnabled),this.press.tellDisabled=i(this,this.pressDisabled),this.dragging=new C,this.dragInform=!1,this.draggingParent=new C,this.set_tile(!1),null!=t&&this.set_image(t),this._style.position="absolute"};d.__name__=!0,d.prototype={pressEnabled:function(){var t=this;this._dom.onmousedown=function(i){var e=i;t._clientX=e.clientX,t._clientY=e.clientY,t.press.dispatch()}},pressDisabled:function(){this._dom.onmousedown=null},releaseEnabled:function(){var t=this;this._dom.onmouseup=function(i){var e=i;t._clientX=e.clientX,t._clientY=e.clientY,t.release.dispatch()}},releaseDisabled:function(){this._dom.onmouseup=null},overEnabled:function(){var t=this;this._dom.onmouseover=function(i){t.over.dispatch()}},overDisabled:function(){this._dom.onmouseover=null},outEnabled:function(){var t=this;this._dom.onmouseout=function(i){t.out.dispatch()}},outDisabled:function(){this._dom.onmouseout=null},setupDrag:function(){this._style.cursor="pointer",this.press.add(i(this,this.startDrag)),this.release.add(i(this,this.stopDrag))},startDrag:function(){this.offSetX=_["int"](this._clientX-this.get_x()),this.offSetY=_["int"](this._clientY-this.get_y()),p.ROOT(this).onmousemove=i(this,this.drag)},stopDrag:function(){p.ROOT(this).onmousemove=null},drag:function(t){this.dragInform&&this.dragging.dispatch();var i=t;this.set_x(i.clientX-this.offSetX),this.set_y(i.clientY-this.offSetY)},isVideo:function(t){if(null==t)return!1;var i=t.split(".");if(null==i.length)return!1;var e=i[1];switch(e){case"ogv":case"mpeg":case"mov":case"mp4":case"webm":return this.videoType="video/"+e,!0}return!1},set_image:function(t){this._img=t,this.isIE&&this.createImageDivIfNot(),t.split(".").length>1?this.isIE?this.imageDiv.set_image(t):null==this._vid?this._style.backgroundImage="url("+t+")":(this._dom.setAttribute("src",t),this._dom.setAttribute("type",this.videoType)):this.isIE?this.imageDiv.set_image(t):this._dom.className=t},set_tile:function(t){return this._tile=t,this.isIE&&this.createImageDivIfNot(),this._tile?this.isIE?this.imageDiv.set_tile(!0):this._style.backgroundRepeat="repeat":this.isIE?this.imageDiv.set_tile(!1):this._style.backgroundRepeat="no-repeat",t},createImageDivIfNot:function(){return null==this.imageDiv&&(this.imageDiv=new m,this.imageDiv.set_x(0),this.imageDiv.set_y(0),this.addChild2(this.imageDiv)),this.imageDiv.set_width(this.get_width()),this.imageDiv.set_height(this.get_height()),this.imageDiv},getInstance:function(){return this._dom},addChild:function(t){return this._dom.appendChild(t.getInstance()),t.set_parent(this),this.updateSizeBasedOnChild(t),t.appended(),t},addChild2:function(t){return this._dom.appendChild(t.getInstance()),t.set_parent(this),this.updateSizeBasedOnChild2(t),t.appended(),t},appended:function(){},set_parent:function(t){return this._parent=t,t},updateSizeBasedOnChild2:function(t){this.get_width()<t.get_width()+t.get_x()&&this.set_width(t.get_width()+t.get_x()),this.get_height()<t.get_height()+t.get_y()&&this.set_height(t.get_height()+t.get_y())},updateSizeBasedOnChild:function(t){this.get_width()<t.get_width()+t.get_x()&&this.set_width(t.get_width()+t.get_x()),this.get_height()<t.get_height()+t.get_y()&&this.set_height(t.get_height()+t.get_y())},set_height:function(t){return this._height=t,null==this._twoD?this._style.paddingTop=t+"px":this._style.paddingTop="0px",t},get_height:function(){return(null==this._height||this._height<this._dom.clientHeight)&&(this._height=this._dom.clientHeight),this._height},set_width:function(t){return this._width=t,null==this._twoD?this._style.paddingLeft=t+"px":this._style.paddingLeft="0px",t},get_width:function(){return(null==this._width||this._width<this._dom.clientWidth)&&(this._width=this._dom.clientWidth),this._width},set_y:function(t){return this._y=t,this._style.top=t+"px",t},get_y:function(){return this._y},set_x:function(t){return this._x=t,this._style.left=t+"px",t},get_x:function(){return this._x}};var f=function(){};f.__name__=!0,f.drawGradElipse=function(t,i,e,n,h,o,a,l,u){null==l&&(l=1);var c,d,f,p,m=new r,v=n/2,w=h/2,y=i+v,b=e+w;if(u==D.Horizontal){c=_["int"](Math.floor(n/l));for(var x=new s(0,c),T=x;T.min<T.max;){var E=T.min++,C=window.document;d=C.createElement("div"),m.add(d),f=d.style,f.width=l+"px",p=Math.pow(Math.pow(w,2)*(1-Math.pow(E-v,2)/Math.pow(v,2)),.5),f.top=_.string(b-p)+"px",f.height=_.string(2*p)+"px",f.left=i+l*E+"px",f.position="absolute",t._dom.appendChild(d)}}else{c=_["int"](Math.floor(h/l));for(var I=new s(0,c),O=I;O.min<O.max;){var M=O.min++,S=window.document;d=S.createElement("div"),m.add(d),f=d.style,f.height=l+"px",p=Math.pow(Math.pow(v,2)*(1-Math.pow(M-w,2)/Math.pow(w,2)),.5),f.left=_.string(y-p)+"px",f.width=_.string(2*p)+"px",f.top=e+l*M+"px",f.position="absolute",t._dom.appendChild(d)}}var F=new g(m);return F.fill(a,o),m},f.lineFromTo=function(t,i,e,n,h,o,a,l){null==l&&(l="#ff0000");var _,u,c,d=new r;if(i-n==0){2*Math.ceil(Math.abs(e-h))}else if(e-h==0){2*Math.ceil(Math.abs(i-n))}for(var f,p,g=Math.ceil(Math.pow(Math.pow(i-n,2)+Math.pow(e-h,2),.5)),m=new s(0,g),v=m;v.min<v.max;){var w=v.min++;c=w/g,f=i+(n-i)*c|0,p=e+(h-e)*c|0;var y=window.document;_=y.createElement("div"),d.add(_),u=_.style,u.paddingTop=a+"px",u.paddingLeft=o+"px",u.top=p+"px",u.left=f+"px",u.backgroundColor=l,u.position="absolute",t._dom.appendChild(_)}return d};var p=function(){};p.__name__=!0,p.ROOT=function(t){return p._root},p.addChild=function(t,i){p._root.body.appendChild(i.getInstance())};var g=function(t){null!=t&&(this._grads=t,this._tot=this._grads.length)};g.__name__=!0,g.prototype={fill:function(t,e){if(null!=e&&t!=e){this._c0=t,this._c1=e,this._c0r=this._c0>>16,this._c0g=this._c0>>8&255,this._c0b=255&this._c0,this._c1r=this._c1>>16,this._c1g=this._c1>>8&255,this._c1b=255&this._c1;h.mapi(this._grads,i(this,this.colorMap))}else h.map(this._grads,function(i){i.style.backgroundColor="#"+u.lpad(u.hex(t>>16<<16|(t>>8&255)<<8|255&t),"0",6)})},colorMap:function(t,i){var e=t/this._tot,n=i.style;return n.backgroundColor="#"+u.lpad(u.hex((this._c0r+(this._c1r-this._c0r)*e|0)<<16|(this._c0g+(this._c1g-this._c0g)*e|0)<<8|(this._c0b+(this._c1b-this._c0b)*e|0)),"0",6),i}};var m=function(i){t.log("imageDiv"),this._dom=p.ROOT(this).createElement("div"),this._style=this._dom.style,this.set_tile(!1),null!=i&&this.set_image(i),this._style.position="absolute",this._d=0};m.__name__=!0,m.prototype={set_image:function(t){this._img=t,t.split(".").length>1?this._style.backgroundImage="url("+t+")":this._dom.className=t},appended:function(){},set_tile:function(t){return this._tile=t,this._tile?this._style.backgroundRepeat="repeat":this._style.backgroundRepeat="no-repeat",t},getInstance:function(){return this._dom},set_height:function(t){return this._height=t,this._style.paddingTop=t+"px",t},get_height:function(){return(null==this._height||this._height<this._dom.clientHeight)&&(this._height=this._dom.clientHeight),this._height},set_width:function(t){return this._width=t,this._style.paddingLeft=t+"px",t},get_width:function(){return(null==this._width||this._width<this._dom.clientWidth)&&(this._width=this._dom.clientWidth),this._width},set_y:function(t){return this._y=t,this._style.top=t+"px",t},get_y:function(){return this._y},set_x:function(t){return this._x=t,this._style.left=t+"px",t},get_x:function(){return this._x},set_parent:function(t){return this._parent=t,t}};var v=function(t,i){null==i&&(i=768),null==t&&(t=1024);var e=window.document;this.canvas=e.createElement("canvas"),this.dom=this.canvas,this.body=window.document.body,this.surface=this.canvas.getContext("2d",null),this.style=this.dom.style,this.canvas.width=t,this.canvas.height=i,this.style.paddingLeft="0px",this.style.paddingTop="0px",this.style.left=_.string("0px"),this.style.top=_.string("0px"),this.style.position="absolute",this.image=this.dom};v.__name__=!0;var w={__ename__:!0,__constructs__:["Chrome","Safari","WebKitOther","FireFox","Opera","IE"]};w.Chrome=["Chrome",0],w.Chrome.toString=e,w.Chrome.__enum__=w,w.Safari=["Safari",1],w.Safari.toString=e,w.Safari.__enum__=w,w.WebKitOther=["WebKitOther",2],w.WebKitOther.toString=e,w.WebKitOther.__enum__=w,w.FireFox=["FireFox",3],w.FireFox.toString=e,w.FireFox.__enum__=w,w.Opera=["Opera",4],w.Opera.toString=e,w.Opera.__enum__=w,w.IE=["IE",5],w.IE.toString=e,w.IE.__enum__=w;var y=function(){};y.__name__=!0,y.get_browserType=function(){return null==y._browserType&&y.set_browserType(window.navigator.userAgent),y._browserType},y.set_browserType=function(t){if(y._userAgent=t,new n("WebKit","").match(t))new n("Chrome","").match(t)?y._browserType=w.Chrome:new n("Safari","").match(t)?y._browserType=w.Safari:y._browserType=w.Opera;else if(new n("Opera","").match(t))y._browserType=w.Opera;else if(new n("Mozilla","").match(t)){var i="undefined"!=typeof document&&null!=document.all&&"undefined"!=typeof window&&null==window.opera;i?y._browserType=w.IE:y._browserType=w.FireFox}else y._browserType=w.IE;return y._browserType};var b={};b.__name__=!0,b._new=function(t){return t};var x={};x.__name__=!0,x._new=function(t){return t};var T=function(){};T.__name__=!0,T.triangulate=function(t){var i=t.length>>1;if(3>i)return[];for(var e=[],n=[],s=0;i>s;){var h=s++;n.push(h)}for(var r,o,a,l,_,u,c,d,f,p,g=0,m=i;m>3;){if(r=n[g%m],o=n[(g+1)%m],a=n[(g+2)%m],l=t[2*r],_=t[2*r+1],u=t[2*o],c=t[2*o+1],d=t[2*a],f=t[2*a+1],p=!1,(_-c)*(d-u)+(u-l)*(f-c)>=0){p=!0;for(var v=0;m>v;){var w=v++,y=n[w];if(y!=r&&y!=o&&y!=a&&T.pointInTriangle(t[2*y],t[2*y+1],l,_,u,c,d,f)){p=!1;break}}}if(p)e.push(r),e.push(o),e.push(a),n.splice((g+1)%m,1),m--,g=0;else if(g++>3*m)break}return e.push(n[0]),e.push(n[1]),e.push(n[2]),e},T.pointInTriangle=function(t,i,e,n,s,h,r,o){var a=r-e,l=o-n,_=s-e,u=h-n,c=t-e,d=i-n,f=a*a+l*l,p=a*_+l*u,g=a*c+l*d,m=_*_+u*u,v=_*c+u*d,w=1/(f*m-p*p),y=(m*g-p*v)*w,b=(f*v-p*g)*w;return y>=0&&b>=0&&1>y+b};var E=function(){};E.__name__=!0,E.__string_rec=function(t,i){if(null==t)return"null";if(i.length>=5)return"<...>";var e=typeof t;switch("function"==e&&(t.__name__||t.__ename__)&&(e="object"),e){case"object":if(t instanceof Array){if(t.__enum__){if(2==t.length)return t[0];var n=t[0]+"(";i+="	";for(var s=2,h=t.length;h>s;){var r=s++;n+=2!=r?","+E.__string_rec(t[r],i):E.__string_rec(t[r],i)}return n+")"}var o=t.length,a="[";i+="	";for(var l=0;o>l;){var _=l++;a+=(_>0?",":"")+E.__string_rec(t[_],i)}return a+="]"}var u;try{u=t.toString}catch(c){return"???"}if(null!=u&&u!=Object.toString&&"function"==typeof u){var d=t.toString();if("[object Object]"!=d)return d}var f=null,p="{\n";i+="	";var g=null!=t.hasOwnProperty;for(var f in t)(!g||t.hasOwnProperty(f))&&"prototype"!=f&&"__class__"!=f&&"__super__"!=f&&"__interfaces__"!=f&&"__properties__"!=f&&(2!=p.length&&(p+=", \n"),p+=i+f+" : "+E.__string_rec(t[f],i));return i=i.substring(1),p+="\n"+i+"}";case"function":return"<function>";case"string":return t;default:return String(t)}};var C=function(){this.disableKill()};C.__name__=!0,C.prototype={disableKill:function(){this.kill=function(){t.log("Can't kill other listeners unless enableKill")}},get_length:function(){return null==this.func?null!=this.func0?1:null:this.func.length},add:function(t,i,e){return null==this.get_length()?(this.func0=t,null!=this.tellEnabled&&this.tellEnabled(),void(null!=i?1==i?this.times0=1:this.times0=-1:null!=e?this.times0=e:this.times0=-1)):(null==this.func&&(this.func=[],this.times=[],this.func.push(this.func0),this.times.push(this.times0),this.func0=null,this.times0=null),this.func.push(t),void(null!=i?1==i?this.times.push(1):this.times.push(-1):null!=e?this.times.push(e):this.times.push(-1)))},remove:function(t){if(null!=this.get_length()){if(1==this.get_length())return void(l.compareMethods(t,this.func0)&&(this.func0=null,this.times0=null,null!=this.tellDisabled&&this.tellDisabled()));for(var i=0,e=this.func.length;e>i;){var n=i++;l.compareMethods(this.func[n],t)&&(this.func.splice(n,1),this.times.splice(n,1))}1==this.get_length()&&(this.func0=this.func[0],this.times0=this.times[0],this.func=null,this.times0=null)}},dispatch:function(){if(null!=this.get_length()){var t;if(1==this.get_length())return this.func0(),void(-1==this.times0||(this.times0--,0==this.times0&&this.remove(this.func0)));for(var i=0,e=this.func.length;e>i;){var n=i++;this.func[n](),t=this.times[n],-1==t||(t--,this.times[n]=t,0==t&&this.remove(this.func[n]))}}}};var D={__ename__:!0,__constructs__:["Horizontal","Vertical"]};D.Horizontal=["Horizontal",0],D.Horizontal.toString=e,D.Horizontal.__enum__=D,D.Vertical=["Vertical",1],D.Vertical.toString=e,D.Vertical.__enum__=D;var I=0;String.__name__=!0,Array.__name__=!0,p._root=window.document,a.main()}("undefined"!=typeof console?console:{log:function(){}});
